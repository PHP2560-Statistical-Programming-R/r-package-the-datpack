Packages to use: 	epiR, incidence, epitools, epicalc, Epi
 
```{r}
#install.packages("epicalc", repos = "http://medipe.psu.ac.th/epicalc")

#http://www.columbia.edu/~cjd11/charles_dimaggio/DIRE/resources/R/packages.pdf

library(RColorBrewer)
#summary tables and statistics - create & visualize
```

```{r}

ggplot(data=Fatalities, aes(x=jail, y=breath)) + geom_bar(stat="identity", color="blue", fill="white")

ggplot(Fatalities, aes(x=jail, y=drinkage, color=breath)) +
  geom_bar(stat="identity", fill="white")
```


```{r}
epi.box<-function(x,y, data, main, xlab, ylab, notch=TRUE ){
  boxplot(x~y, data=data, notch=notch,
  main="main", xlab="xlab", ylab="ylab")
} 

epi.box(Fatalities$income, Fatalities$jail, data=Fatalities)
```

```{r}
#using plotly

#plot_ly(Fatalities, y = ~income, color = I("black")), 
            # alpha = 0.1, boxpoints = "suspectedoutliers")
p <- plot_ly(y = ~Fatalities$income, type = "box", boxpoints = "all", jitter = 0.3,
        pointpos = -1.8) #%>%


  #add_trace(y = ~Fatalities$income)
p

plot_ly(Fatalities,x=~breath, y = ~income, color=~jail, type = "box", boxpoints = "all", jitter = 0.3,
        pointpos = -1.8) %>%
  layout(boxmode = "group")
```

```{r}
epi.hist<-function(x,y, data, main, xlab, ylab, notch=TRUE ){
  boxplot(x~y, data=data, notch=notch,
  main="main", xlab="xlab", ylab="ylab")
} 

epi.box(Fatalities$income, Fatalities$jail, data=Fatalities)


epi.dens<-
```

```{r}
  
#using plotly()
 
plot_ly(Fatalities, x = ~income, type = "histogram") 

plot_ly(Fatalities) %>% add_histogram(name = "Income")

price_hist <- function(method = "FD") {
  h <- hist(diamonds$price, breaks = method, plot = FALSE)
  plot_ly(x = h$mids, y = h$counts) %>% add_bars(name = method)
}


plot_ly(Fatalities, x = ~breath, color = ~jail) %>%
  add_histogram()

  
```

```{r}  
ggplot(data=Fatalities, aes(Fatalities$income)) + 
  geom_histogram(aes(y =..density..), 
                 col="blue", 
                 fill="grey", 
                 alpha=.2) + 
  geom_density(col=2) + 
  labs(title="Histogram for Age", x="Age", y="Count")
  
  
  #make a 2x2**********************
blue
```

```{r}

#epi.2by2

dat <- matrix(c(13,2163,5,3349), nrow = 2, byrow = TRUE)
rownames(dat) <- c("DF+", "DF-"); colnames(dat) <- c("FUS+", "FUS-"); dat

epi.2by2(dat = as.table(dat), method = "cross.sectional", 
   conf.level = 0.95, units = 100,  homogeneity = "breslow.day", 
   outcome = "as.columns")

```


```{r}

ggplot(data=Fatalities, aes(Fatalities$income)) + 
  geom_histogram(aes(y =..density..), 
                 col="blue", 
                 fill="grey", 
                 alpha=.2) + 
  geom_density(col=2) + 
  labs(title="Histogram for Age", x="Age", y="Count")


#library(ggplot2)
ggplot(data=Fatalities, aes(income)) + 
  geom_histogram(col="black",
                 aes(fill=..count..)) +
  scale_fill_gradient("Count", low="light blue", high="navy")+ geom_density() + 
  labs(title="Histogram for Age", x="Age", y="Count")
  

```


```{r}
#scatterplots
#ggplot2





#plotly

```

```{r}
library(AER)

data("Fatalities")




if comments for when people don't read instructions

library(epiR)
library(epitools)
library(incidence)
library(Epi)
library(epiDisplay)
library(epicalc)
library(devtools)
library(roxygen2)
library(plotly)
```
  
```{r}
To include:
  2x2 table
  incidence
  rate ratio
  risk ratio
  odds ratio
  CIs
  exploratory
  ttest
  univariate analysis
  multivariate analysis
  mcnemar's test


PLOTLY!!!!!!!! - no 3d plots

stargazer pckg
create basic statistics - stargazer to generate
produce stats and put into a table 


shiny app - drag by year - scroll bar by year - define axis as based on the data

broom to tidy into a table

function to produce table with all their measures - beautify tables

r oxygen will generate manual 

write function that formats data the way we want it to - enter column names
naming mechanism for variables and columns - survey makes you identify
function renames dataset with prevalence, incidence - output just anoter dataset

include links in the vignetts - explain and then for future details - insert links

1.
2.
3.
use wcgs to test
  

epi.2by2

```


```{r}

#write a function with an argument to select plot type - set color scheme to match the maps

epiplot<- function(data,x,y, graph, fill, title, xlab, ylab, notch=TRUE){
if(graph = bar){                           #boxplot function
   barplot(table(data$x), col=c("lightblue","darkblue"),main="title", xlab="xlab", ylab = "ylab")
} else if(graph=bargroup){
  ggplot(data, aes(fill=fill, y=y, x=x)) +
  geom_bar(position="dodge", stat="identity") + scale_fill_brewer(palette = "Paired")+theme_bw()+facet_wrap(~jail)
} else if(graph=barstack){
  ggplot(data, aes(fill=fill, y=y, x=x)) +
    geom_bar( stat="identity")
} else if(graph=boxplot){                           #add code for dot plots
  boxplot(x~y, data=data, notch=notch,
  main="title", xlab="xlab", ylab="ylab")
} else if(graph=hist){
  ggplot(data=data, aes(x)) +                     #for histograms - write function
  geom_histogram(col="black", aes(fill=..count..)) +
  scale_fill_gradient("Count", low="light blue", high="navy")
  labs(title="title", x="xlab", y="ylab")
} else if(graph=histcurve){                                   ####add an argument for adding a curve to histogram/scatter
  ggplot(data=data, aes(x)) +                     #for histograms - write function
  geom_histogram(col="black", aes(fill=..count..)) +
  scale_fill_gradient("Count", low="light blue", high="navy")+ 
  geom_density() + 
  labs(title="title", x="xlab", y="ylab")
} else if(graph=scatter){
  
} else if(graph=line){
  
} else if(graph=bubble){
  
} else if(graph=linreg){
  
} else if(graph=kaplan){                        #survival
  
}



  
##groupedbar
  
  
  ggplot(data=Fatalities, aes(x=breath, y=income)) +
  geom_bar(stat="identity")+
  theme_bw()+ 
 scale_fill_brewer(palette = "Blues")
  
  barplot(table(data$x), col=c("lightblue","darkblue"),main="title", xlab="xlab", ylab = "ylab")
  
  
  ggplot(data, aes(fill=fill, y=y, x=x)) +
    geom_bar(position="dodge", stat="identity") + scale_fill_gradient("Count", low="light blue", high="navy")
  ggplot(data, aes(fill=fill, y=y, x=x)) +
    geom_bar(position="dodge", stat="identity") + scale_fill_brewer(palette = "Blues")+theme_bw()

  
  ggplot(Fatalities, aes(y=income, x=breath, color = jail)) +geom_bar( stat="identity")+ scale_fill_brewer(palette = "Blues")+theme_bw()+ facet_wrap(~breath)

  
  table(Fatalities$jail)
##how to deal with NAs
  
  bars <- c(4, 3, 5, 4.5, 5.1)
labels <-  c('Anthrax', 'DRI', 'DOA', 'BIOHAZARD', 'Withstand')
barplot(bars, names.arg = labels, col = brewer.pal(5, name = "Blues"))

is.na(Fatalities$jail)
````

```{r}





```


